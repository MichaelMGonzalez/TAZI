<html ng-app="Tazi">
   <head>
      <title>TAZI - A blockly extention for Gadgetron</title>
      <!-- JQuery -->
      <script src="{{lib}}jquery-2.2.1.min.js"></script>
      <!-- Blockly -->
      <script src="{{blockly}}blockly_compressed.js"></script>
      <script src="{{blockly}}/blocks/blocks_compressed.js"></script>
      <script src="{{blockly}}/blocks/custom_blocks.js"></script>
      <script src="{{blockly}}msg/js/en.js"></script>
      <script src="{{blockly}}requests.js"></script>
      <!-- Angular -->
      <script src="{{lib}}angular/angular.js"></script>
      <script src="{{lib}}angular-material/angular-material.min.js"></script>
      <script src="{{lib}}angular-aria/angular-aria.min.js"></script>
      <script src="{{lib}}angular-animate/angular-animate.min.js"></script>
      <link href="{{lib}}angular-material/angular-material.min.css" rel="stylesheet" />
      <script src="{{resDir}}controllers/IDEController.js"></script>
      <script type="text/javascript">
         {% for block in blocklist %}
         	var {{block[0]}} = {{block[1]}};
         {% endfor %}
         {% for block in blocklist %}
         	Blockly.Blocks['{{block[0]}}'] = {
         	init: function() {
         		this.jsonInit({{block[0]}});
         	}
         };
         {% endfor %}
      </script>
   </head>
   <body>
      <div width="100%" height="100%" ng-controller="AppCtrl">
         <md-content>
	    <md-toolbar layout="row" layout-padding>
                <h1 class="md-display-1"> TAZI - A Blockly Programming Environment for Robots</h1>
		<span flex> </span>
                <img src="{{resDir}}media/GtronImage.png" alt="Gtron Logo" style="width:auto;height:auto;">		
	    </md-toolbar>
         </md-content>
         <div id="blocklyDiv" style="height: 75%; width: 100%;"></div>
	 <!-- Buttons -->
	 <div>
             <md-button class="md-primary md-raised" ng-click="sendCompilePost()">Compile</md-button>
             <md-button class="md-primary md-raised" ng-click="sendKillPost()">Kill</md-button>
	 </div>
         {{toolbox}}
      </div>
      <script>
         var workspace = Blockly.inject('blocklyDiv',
           		{toolbox: document.getElementById('toolbox')});
      </script>
         <!--md-button class="md-primary md-raised">Test Button</md-button-->
         <!--button onclick="console.log(getXML())">Dump XML</button-->
         <!--button>Save Program</button-->
         <!--button onclick="testPost()">Compile</button>
            <button onclick="sendKillSignal()">Kill</button-->
      <!--input type="file" id="xmlinput" /-->
      <script src="{{blockly}}blocksIO.js"></script>
      <script>
         window.onload = function() { 
             var defaultBlocks = "{{defaultBlocks}}";
             loadXML( defaultBlocks );	
         };
      </script>
   </body>
</html>
