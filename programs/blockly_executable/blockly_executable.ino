/** ############################# Robot Name ############################## **\
|** ~~~~~~~~~~~~~~~~~~~~~~~~~~~*****************~~~~~~~~~~~~~~~~~~~~~~~~~~~ **|
|** ~~~~~~~~~~~~~~~~~~~~~~~~~~/                 \~~~~~~~~~~~~~~~~~~~~~~~~~~ **|
|** ========================={ TAZI_Stress_Board }========================= **|
|** ~~~~~~~~~~~~~~~~~~~~~~~~~~\                 /~~~~~~~~~~~~~~~~~~~~~~~~~~ **|
|** ~~~~~~~~~~~~~~~~~~~~~~~~~~~*****************~~~~~~~~~~~~~~~~~~~~~~~~~~~ **|
\** ##########################[[[[[[[[^_^]]]]]]]]########################## **/


/** ======================================================================= **\
|** ------------------------------ Libraries ------------------------------ **|
\** ======================================================================= **/

#include "TAZI_Stress_Board.h"
#include <Gadgetron.h>
/** ======================================================================= **\
|** --------------------- User Functions Declarations --------------------- **|
\** ======================================================================= **/

void inch_forward();
void blink_lights();
void stall();
/** ======================================================================= **\
|** --------------------- User Functions Definitions ---------------------- **|
\** ======================================================================= **/

/* Describe this function...
*/
void inch_forward() {
  drive.forward();
  delay( (int) ( 1000 * (1)));
}

/* Describe this function...
*/
void blink_lights() {
  led.turnOn();
  led_2.turnOn();
}

/* Describe this function...
*/
void stall() {
  drive.stop();
  delay( (int) ( 1000 * (1)));
}

/** ======================================================================= **\
|** --------------------------- Setup Function ---------------------------- **|
|** %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% **|
|** ............................. Description ............................. **|
|** The setup() function runs --ONCE-- when the Arduino boots up. As the    **|
|** name implies, it's useful to add code that 'sets up' your Gadget to     **|
|** run correctly.                                                          **|
|** %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% **|
\** ======================================================================= **/

void setup () {
    led_2.setup();
    button.setup();
    led.setup();
    drive.setup();
}

/** ======================================================================= **\
|** ---------------------------- Loop Function ---------------------------- **|
|** %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% **|
|** ............................. Description ............................. **|
|** The loop() function runs continuously after the setup() function        **|
|** finishes and while the Arduino is running. In other words, this         **|
|** function is called repeatly over and over again when it reaches the     **|
|** end of the function. This function is where the majority of your        **|
|** program's logic should go.                                              **|
|** %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% **|
\** ======================================================================= **/

void loop () {
  if(button.isPressed()) {
    blink_lights();
  }
  else if(!(drive.isMoving())) {
    inch_forward();
  }
  else {
    stall();
  };
}
